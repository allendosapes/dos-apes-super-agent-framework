{
  "$schema": "https://raw.githubusercontent.com/anthropics/claude-code/main/schemas/settings.schema.json",
  "_comment": "Dos Apes Super Agent Framework - We ain't monkeying around with code!",

  "contextFiles": [],

  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo 'ðŸ¦ Dos Apes session started. Branch: '$(git branch --show-current)'. Tasks:' && cat .planning/ROADMAP.md 2>/dev/null | head -5 || echo 'No roadmap yet'",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "bash scripts/metrics-init.sh 2>/dev/null || true",
            "timeout": 10
          }
        ]
      }
    ],

    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/guard-main-branch.sh",
            "timeout": 5
          }
        ]
      }
    ],

    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "npx prettier --write \"$CLAUDE_FILE_PATH\" 2>/dev/null || true",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "git add \"$CLAUDE_FILE_PATH\" 2>/dev/null || true",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Edit:*.ts|Edit:*.tsx|Write:*.ts|Write:*.tsx",
        "hooks": [
          {
            "type": "command",
            "command": "npx tsc --noEmit 2>&1 | head -20 || true",
            "timeout": 30
          }
        ]
      },
      {
        "matcher": "Edit:*.test.*|Write:*.test.*",
        "hooks": [
          {
            "type": "command",
            "command": "npm test -- --related 2>&1 | tail -10 || true",
            "timeout": 60
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "bash scripts/track-modified-files.sh 2>/dev/null || true",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "bash scripts/metrics-update.sh 2>/dev/null || true",
            "timeout": 5
          }
        ]
      }
    ],

    "Stop": [
      {
        "hooks": [
          {
            "type": "agent",
            "prompt": "You are a code reviewer. Read .claude/skills/review.md. Review ONLY the files listed in /tmp/dos-apes-modified-files.txt against project standards. Report issues with confidence scores. Only flag issues >= 80 confidence. Be concise.",
            "timeout": 180
          }
        ]
      }
    ]
  },

  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": ["@playwright/mcp@latest", "--headless"]
    }
  },

  "permissions": {
    "allowedTools": {
      "Bash": {
        "allowedCommands": [
          "git status",
          "git diff *",
          "git log *",
          "git branch *",
          "git checkout *",
          "git add *",
          "git commit *",
          "git push *",
          "git pull *",
          "git fetch *",
          "git merge *",
          "git rebase *",
          "git stash *",
          "git worktree *",
          "git remote *",
          "git show *",
          "git rev-parse *",
          "git config --get *",
          "git tag *",
          "npm *",
          "npx *",
          "yarn *",
          "pnpm *",
          "bun *",
          "node *",
          "tsc *",
          "tsx *",
          "vitest *",
          "jest *",
          "eslint *",
          "prettier *",
          "cat *",
          "ls *",
          "find *",
          "grep *",
          "rg *",
          "wc *",
          "head *",
          "tail *",
          "mkdir *",
          "cp *",
          "mv *",
          "rm *",
          "touch *",
          "echo *",
          "sed *",
          "awk *",
          "chmod +x *",
          "which *",
          "pwd",
          "date *",
          "sort *",
          "uniq *",
          "tr *",
          "cut *",
          "xargs *",
          "bash *",
          "gitleaks *"
        ]
      },
      "Read": { "allowed": true },
      "Edit": { "allowed": true },
      "Write": { "allowed": true },
      "Grep": { "allowed": true },
      "Glob": { "allowed": true },
      "Task": { "allowed": true },
      "TodoWrite": { "allowed": true },
      "WebFetch": { "allowed": true }
    }
  },

  "environment": {
    "DOS_APES_FRAMEWORK": "true",
    "DOS_APES_VERSION": "2.0.0"
  }
}
